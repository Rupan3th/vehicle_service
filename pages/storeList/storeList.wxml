<!--pages/storeList/storeList.wxml-->
<view style="background-color:black; width:100%; height: 100%; position: fixed; z-index:99; opacity: 0.5; display: {{modalStateFull}};"></view>

<view class="page__bd"  >
    <mp-searchbar placeholder="请输入店名/地址" focus="false" value="{{inputVal}}" cancelText="" bindselectresult="selectResult" search="{{search}}"></mp-searchbar>
</view>
<view class="page__desc" style="display:none;">{{result}}</view> 

<view class="filter-dropdown">
    <view class='dropdown-tap' bindtap="drop_selectCity">{{filterCity}}<view class="{{arrowStateCity}}" ></view></view>
    <view class='dropdown-tap' bindtap="drop_selectBrand">{{filterBrand}}<view class="{{arrowStateBrand}}" ></view></view>
    <view class='dropdown-tap' bindtap="drop_selectType">{{filterType}}<view class="{{arrowStateType}}" ></view></view>
</view>
<!-- modal opacity -->
<view style="background-color:black; width:100%; height: 100%; position: fixed; z-index:99; opacity: 0.5; display: {{modalState}};"></view>

<!-------------- City List --------------->
<view style="width: 100%; height:1000rpx; padding-left:10px; position: fixed;  top:100; background-color:#ffffff; z-index:100; display:{{cityListView}};">
    <view class='flex ' style="padding-left:30px; padding-top:10px; padding-bottom: 10px; display: flex; flex-direction: column">  
        <scroll-view class="flex1" scroll-y scroll-into-view="{{toView}}" style='height:950rpx'>
            <view style="margin-top: 10rpx; margin-bottom: 30rpx; font-size: 32rpx; color: #36AA48; color: {{allCitycolor}}" bindtap='selectAllCity' > 全部 </view>  
            <view style='font-size:15px; color: #333333; margin-bottom: 16px;'
            wx:for='{{provinceList}}' wx:for-index="idx"  bindtap='opencitiesList' data-name='{{item.name}}' data-idx='{{idx}}' data-pid='{{item.id}}' wx:key='id'>{{item.name}}
                <view style='font-size:15px; color: #333333; margin-top: 12px; margin-left: 10px; display: {{citieslistShow[idx]}}; color: {{colorCity[idx][index]}}'
                wx:for='{{item.cities}}' wx:key='id' wx:for-item='n' bindtap='selectCityName' data-name='{{n.name}}' data-id='{{n.id}}' data-index='{{index}}' data-pid='{{item.id}}' >
                    <image style="width:14px; height:14px; padding-bottom:4px;" src="../../image/tree_icon.png"></image>
                    {{n.name}}
                </view>
            </view>  
        </scroll-view>        
    </view>
</view> 
 <!-------------- Car brand List --------------->
 <view style="width: 100%; height:1000rpx; padding-left:10px; position: fixed;  top:100; background-color:#ffffff; z-index:100; display:{{carbarandListView}};">
  <view class='flex ' style="padding-left:10px;">
      <scroll-view class="flex1" scroll-y scroll-into-view="{{toView}}" style='height:1000rpx'>
        <view style="margin-left: 60rpx; margin-top: 30rpx; font-size: 32rpx; color: #36AA48; color: {{allscolor}}" bindtap='selectAllbrand' > 全部 </view>
        <block wx:for='{{brandlist}}' wx:key='id' >
          <view class='lh40 fz16 color9e ml10'  id='{{item.initial}}' >{{item.initial}}</view>
          <view class='bgf fz14' style="background-color: #ffffff;">
            <view class='flex alic borderbe0 ml10 pt15 pb15' 
                  style = 'border-style:none; width: 50%; height: 50px; font-size: 15px; padding:0px 20px; color: {{colorBrand[item.id-1][index]}};' 
                  wx:for='{{item.list}}' wx:key='i' wx:for-item='n' data-name='{{n.name}}' data-id='{{n.id}}' data-index='{{index}}' data-init='{{item.id}}' bindtap='selectCarBrand'>
              <image src='{{n.image}}' class='img mr15'></image>
              <text>{{n.name}}</text>              
            </view>
          </view>
        </block>
      </scroll-view>      
      <view class='posFix right0 tc fz12 flex justsa colu' style='height:720rpx; margin-top: 150rpx; margin-right: 24px;'>       
        <view wx:for='{{nav}}' bindtap='toView' data-i='{{index}}' wx:key='a'>{{item}}</view>
      </view>
    </view>
</view>
<!-------------TypeListView----------->
<view style="width: 100%; padding-left:10px; position: fixed;  top:100; background-color:#ffffff; z-index:100; display:{{TypeListView}};">
    <view class='flex ' style="padding-left:44px; padding-top:10px; padding-bottom: 10px; display: flex; flex-direction: column">    
      <view style='font-size:15px; margin-bottom: 10px; color: {{colorType[index]}};'
        wx:for='{{garageTypeList}}' bindtap='selectgarageType' data-name='{{item.name}}' data-index='{{index}}' data-id='{{item.id}}' wx:key='id'>{{item.name}}</view>  
    </view>
</view>
<!-- garageList contents-->
<view>
    <scroll-view scroll-y="true" style="height:{{ scrollHeight}}px;width:100%;" bindscrolltolower="loadMore">
    <block wx:for="{{garageList}}" wx:key="id" wx:for-item="garage">
        <view class="garagelist-item" bindtap="onChooseGarage" data-id="{{garage.id}}" data-index="{{index}}">
            <view class="leftradio-box">
                <image style="height:32rpx; width:32rpx; display: {{checkshow}}"  src='../../image/{{selected[index] == 1 ? "select_on" : "select_off"}}.png'></image>          
            </view>        
            <view class="garage-info-box">
                <view class="info-contents">
                    <image style="height:175rpx; width:175rpx; min-width:175rpx; border-radius: 10rpx;" mode="widthFix" src="{{garage.image}}"></image>
                    <view style="margin-left:18rpx;">
                        <view style="color: #333333; font-size: 34rpx; font-weight:bold; margin-top:-10rpx; margin-bottom:12rpx;">{{garage.name}}</view>
                        <view class='brand-line'>
                            <text class='shiesdian'>{{garageTypes[garage.type]}}</text>
                            <text wx:for="{{garage.brands}}" wx:for-index="brandIndex" wx:for-item="brand" wx:key="brandIndex" class="brand">{{brand}}</text>
                        </view>
                        <view class='address-line' bindtap="openMap" data-latitude="{{garage.latitude}}" data-longitude="{{garage.longitude}}">
                            <image style="min-width: 27rpx; width: 27rpx; height: 32rpx" src='../../image/marker.png'></image>
                            <view style='color:#666666; font-size:28rpx; font-weight: bold; margin-top:-5rpx; margin-left:10rpx;'>{{garage.address}}</view>
                        </view>
                    </view>
                </view>
                <view class='score-line'>
                    <image style="width:32rpx; height:35rpx; margin-right:8rpx;" src='../../image/{{garage.score >= 1 ? "star_on" : "star_off"}}.png'></image>       
                    <image style="width:32rpx; height:35rpx; margin-right:8rpx;" src='../../image/{{garage.score >= 2 ? "star_on" : "star_off"}}.png'></image>  
                    <image style="width:32rpx; height:35rpx; margin-right:8rpx;" src='../../image/{{garage.score >= 3 ? "star_on" : "star_off"}}.png'></image>  
                    <image style="width:32rpx; height:35rpx; margin-right:8rpx;" src='../../image/{{garage.score >= 4 ? "star_on" : "star_off"}}.png'></image>  
                    <image style="width:32rpx; height:35rpx; margin-right:8rpx;" src='../../image/{{garage.score >= 5 ? "star_on" : "star_off"}}.png'></image>              
                    <view style="color: #FFC33B; font-size: 28rpx; font-weight:bold; margin-left: 10rpx;">{{garage.score}}</view>
                    <view class="max-char">{{garage.tag || '最多六个文字'}}</view>
                </view>
                <view class="insurance-line">
                    <text wx:for="{{garage.insurances}}" wx:for-item="ins" wx:key="index" class='insurance'>{{ins}}</text>
                </view>
                <view style="border-top:1px solid #F3F3F3; margin-top:16rpx;"></view>
                <view class="distens-line">
                    <view>{{garage.distance || 9999}}km</view>
                    <button open-type="share" data-id="{{garage.id}}" class="btn-share" 
                    style="display: flex; color: #666666; font-size: 26rpx; margin-left: auto; margin-right: 0rpx; align-items: center;">
                        <image style="width:16rpx; height:26rpx; margin-right:8rpx;" src='../../image/sharing.png'></image>
                        去分享                        
                    </button>
                </view>
            </view>               
              
        </view>
    </block>
</scroll-view>
</view>

<!-- popup The current city is Beijing. Do you want to modify the city? -->
<view class="modal-qz" style="display:{{popupQzCity}}; flex-direction:column; align-items: center;">
    <image style="width: 280rpx; height: 220rpx; margin-top: -100rpx;" src="../../image/city_icon.png"></image>
    当前城市为北京，是否修改城市？
    <view style="display: flex; flex-direction: row; margin-top: 80rpx; justify-content: space-between;">
        <button class='save-ok' bindtap='selectotherCity' style="width: 220rpx;">确定</button>
        <view style="width: 40rpx;"></view>
        <button class='save-cancel' bindtap='cancleotherCity' style="width: 220rpx;">取消</button>
    </view>
</view>
<!-- popup  Do you choose this Garage? -->
<view class="modal-qz" style="display:{{popupQzGarage}}; flex-direction:column; align-items: center;">
    <image style="width: 280rpx; height: 220rpx; margin-top: -100rpx;" src="../../image/garage_icon.png"></image>
    是否选择此门店？
    <view style="display: flex; flex-direction: row; margin-top: 80rpx; justify-content: space-between;">
        <button class='save-ok' bindtap='onConfirmChooseGarage' style="width: 220rpx;">确定</button>
        <view style="width: 40rpx;"></view>
        <button class='save-cancel' bindtap='onCancelChooseGarage' style="width: 220rpx;">取消</button>
    </view>
</view>
<!-- there is no Garage? -->
<view class="no-result" style="display: {{noResultDisplayState}};">
    <image style="width:105px; height:105px;" src="../../image/no_garage.png"></image>
    <text style="color: #999999; margin-top: 16px; ">苹方-简 常规体</text>
</view>


